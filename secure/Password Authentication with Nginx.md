Итак, у нас есть некий веб-сервис, который нужно закрыть от посторонних глаз. вариантов есть масса, от простого парольного доступа и до сертификатов и авторизацией через LDAP. В данный момент берём самый простой вариант: Basic Auth.

Для начала обговорим условия:

* user - это вы можете заменить на имя пользователя
* /etc/nginx/.htpasswd - в данном файле будет хранится зашифрованный пароль.

Итак, добавляем пользователя

```
echo -n 'user:' >> /etc/nginx/.htpasswd
```

Теперь добавляем пароль. Система дважды запросит пароль.

```
openssl passwd -apr1 >> /etc/nginx/.htpasswd
```

Теперь вы можете посмотреть содержимое файла.

```
cat /etc/nginx/.htpasswd
```
Получиться должно что-то типа этого:

```
user:$aertyeiuydkjfbvksOWkopnXqC1d1
```

А теперь добавим этот файл в конфигурации NginX там, где нам надо закрыть доступы. Просто в секцию location добавляем 2 строки:

```
location / {
    ....
		auth_basic "Restricted Content";
    auth_basic_user_file /etc/nginx/.htpasswd;
}
```

и проверка конфигурации с последующей перезагрузкой конфигов.

```
nginx -t
nginx -s reload
```

Можно зайти и проверить.
